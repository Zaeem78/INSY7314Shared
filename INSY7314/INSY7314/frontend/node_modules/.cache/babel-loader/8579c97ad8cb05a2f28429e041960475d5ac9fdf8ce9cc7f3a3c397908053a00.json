{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{useAuth}from'../contexts/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PaymentHistoryPage=()=>{const[payments,setPayments]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const[filter,setFilter]=useState('ALL');const{token}=useAuth();useEffect(()=>{fetchPayments();},[token]);const fetchPayments=async()=>{try{setLoading(true);const response=await axios.get('/payments',{headers:{Authorization:\"Bearer \".concat(token)}});setPayments(response.data);}catch(error){let errorMessage='Failed to fetch payment history';if(error.response&&error.response.data&&error.response.data.error){errorMessage=error.response.data.error;}else if(error.message){errorMessage=error.message;}setError(errorMessage);}finally{setLoading(false);}};const getStatusBadge=status=>{const statusColors={'PENDING':'badge-pending','VERIFIED':'badge-verified','SUBMITTED':'badge-submitted','FAILED':'badge-failed'};return/*#__PURE__*/_jsx(\"span\",{className:\"status-badge \".concat(statusColors[status]||'badge-default'),children:status});};const filteredPayments=filter==='ALL'?payments:payments.filter(payment=>payment.status===filter);if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"container main-content\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading payment history...\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"container main-content\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'30px'},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Payment History\"}),/*#__PURE__*/_jsx(\"p\",{children:\"View all your payment transactions\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"statusFilter\",style:{marginRight:'10px'},children:\"Filter by Status:\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"statusFilter\",value:filter,onChange:e=>setFilter(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"ALL\",children:\"All Payments\"}),/*#__PURE__*/_jsx(\"option\",{value:\"PENDING\",children:\"Pending\"}),/*#__PURE__*/_jsx(\"option\",{value:\"VERIFIED\",children:\"Verified\"}),/*#__PURE__*/_jsx(\"option\",{value:\"SUBMITTED\",children:\"Submitted\"}),/*#__PURE__*/_jsx(\"option\",{value:\"FAILED\",children:\"Failed\"})]})]}),filteredPayments.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No payments found matching the selected filter.\"})}):/*#__PURE__*/_jsx(\"div\",{className:\"payments-history\",children:filteredPayments.map(payment=>/*#__PURE__*/_jsxs(\"div\",{className:\"card payment-history-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"payment-history-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"payment-history-amount\",children:/*#__PURE__*/_jsxs(\"strong\",{children:[payment.amount,\" \",payment.currency]})}),/*#__PURE__*/_jsx(\"div\",{className:\"payment-history-status\",children:getStatusBadge(payment.status)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"payment-history-details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Beneficiary:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value\",children:payment.beneficiaryName})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Account:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value\",children:payment.beneficiaryAccountNumber})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"SWIFT Code:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value\",children:payment.beneficiarySwiftCode})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Provider:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value\",children:payment.paymentProvider})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Created:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value\",children:new Date(payment.createdAt).toLocaleString()})]}),payment.status==='FAILED'&&/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Error:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value error\",children:\"Payment processing failed\"})]})]})]},payment.id))})]});};export default PaymentHistoryPage;","map":{"version":3,"names":["React","useEffect","useState","axios","useAuth","jsx","_jsx","jsxs","_jsxs","PaymentHistoryPage","payments","setPayments","loading","setLoading","error","setError","filter","setFilter","token","fetchPayments","response","get","headers","Authorization","concat","data","errorMessage","message","getStatusBadge","status","statusColors","className","children","filteredPayments","payment","style","marginBottom","htmlFor","marginRight","id","value","onChange","e","target","length","map","amount","currency","beneficiaryName","beneficiaryAccountNumber","beneficiarySwiftCode","paymentProvider","Date","createdAt","toLocaleString"],"sources":["C:/Users/pc/Desktop/INSY7314/INSY7314/frontend/src/pages/PaymentHistoryPage.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { useAuth } from '../contexts/AuthContext';\n\nconst PaymentHistoryPage = () => {\n  const [payments, setPayments] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [filter, setFilter] = useState('ALL');\n  const { token } = useAuth();\n\n  useEffect(() => {\n    fetchPayments();\n  }, [token]);\n\n  const fetchPayments = async () => {\n    try {\n      setLoading(true);\n      const response = await axios.get('/payments', {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setPayments(response.data);\n    } catch (error) {\n      let errorMessage = 'Failed to fetch payment history';\n\n      if (error.response && error.response.data && error.response.data.error) {\n        errorMessage = error.response.data.error;\n      } else if (error.message) {\n        errorMessage = error.message;\n      }\n\n      setError(errorMessage);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getStatusBadge = (status) => {\n    const statusColors = {\n      'PENDING': 'badge-pending',\n      'VERIFIED': 'badge-verified',\n      'SUBMITTED': 'badge-submitted',\n      'FAILED': 'badge-failed'\n    };\n\n    return (\n      <span className={`status-badge ${statusColors[status] || 'badge-default'}`}>\n        {status}\n      </span>\n    );\n  };\n\n  const filteredPayments = filter === 'ALL'\n    ? payments\n    : payments.filter(payment => payment.status === filter);\n\n  if (loading) {\n    return (\n      <div className=\"container main-content\">\n        <div className=\"loading\">Loading payment history...</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container main-content\">\n      <div style={{ marginBottom: '30px' }}>\n        <h1>Payment History</h1>\n        <p>View all your payment transactions</p>\n      </div>\n\n      {error && (\n        <div className=\"error\">\n          {error}\n        </div>\n      )}\n\n      <div style={{ marginBottom: '20px' }}>\n        <label htmlFor=\"statusFilter\" style={{ marginRight: '10px' }}>\n          Filter by Status:\n        </label>\n        <select\n          id=\"statusFilter\"\n          value={filter}\n          onChange={(e) => setFilter(e.target.value)}\n        >\n          <option value=\"ALL\">All Payments</option>\n          <option value=\"PENDING\">Pending</option>\n          <option value=\"VERIFIED\">Verified</option>\n          <option value=\"SUBMITTED\">Submitted</option>\n          <option value=\"FAILED\">Failed</option>\n        </select>\n      </div>\n\n      {filteredPayments.length === 0 ? (\n        <div className=\"card\">\n          <p>No payments found matching the selected filter.</p>\n        </div>\n      ) : (\n        <div className=\"payments-history\">\n          {filteredPayments.map(payment => (\n            <div key={payment.id} className=\"card payment-history-item\">\n              <div className=\"payment-history-header\">\n                <div className=\"payment-history-amount\">\n                  <strong>{payment.amount} {payment.currency}</strong>\n                </div>\n                <div className=\"payment-history-status\">\n                  {getStatusBadge(payment.status)}\n                </div>\n              </div>\n\n              <div className=\"payment-history-details\">\n                <div className=\"detail-row\">\n                  <span className=\"detail-label\">Beneficiary:</span>\n                  <span className=\"detail-value\">{payment.beneficiaryName}</span>\n                </div>\n                <div className=\"detail-row\">\n                  <span className=\"detail-label\">Account:</span>\n                  <span className=\"detail-value\">{payment.beneficiaryAccountNumber}</span>\n                </div>\n                <div className=\"detail-row\">\n                  <span className=\"detail-label\">SWIFT Code:</span>\n                  <span className=\"detail-value\">{payment.beneficiarySwiftCode}</span>\n                </div>\n                <div className=\"detail-row\">\n                  <span className=\"detail-label\">Provider:</span>\n                  <span className=\"detail-value\">{payment.paymentProvider}</span>\n                </div>\n                <div className=\"detail-row\">\n                  <span className=\"detail-label\">Created:</span>\n                  <span className=\"detail-value\">\n                    {new Date(payment.createdAt).toLocaleString()}\n                  </span>\n                </div>\n                {payment.status === 'FAILED' && (\n                  <div className=\"detail-row\">\n                    <span className=\"detail-label\">Error:</span>\n                    <span className=\"detail-value error\">Payment processing failed</span>\n                  </div>\n                )}\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default PaymentHistoryPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}