{"ast":null,"code":"import React,{useEffect}from'react';import{useNavigate}from'react-router-dom';import{usePayment}from'../contexts/PaymentContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const NewPaymentPage=()=>{const navigate=useNavigate();const{paymentData,loading,error,success,createdPayment,updateField,resetForm,submitPayment,clearError,clearSuccess}=usePayment();useEffect(()=>{// Reset form when component mounts\nresetForm();},[resetForm]);useEffect(()=>{// Redirect to dashboard after successful payment\nif(success&&createdPayment){const timer=setTimeout(()=>{navigate('/dashboard');},3000);return()=>clearTimeout(timer);}},[success,createdPayment,navigate]);const handleInputChange=e=>{const{name,value}=e.target;updateField(name,value);// Clear errors when user starts typing\nif(error){clearError();}};const handleSubmit=async e=>{e.preventDefault();clearError();const result=await submitPayment();if(result.success){clearSuccess();// This will be set by the context\n}};if(success&&createdPayment){return/*#__PURE__*/_jsx(\"div\",{className:\"container main-content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"success\",style:{textAlign:'center',padding:'50px'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Payment Created Successfully!\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Your payment has been submitted and is pending verification.\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Payment ID: \",createdPayment.id]}),/*#__PURE__*/_jsx(\"p\",{children:\"Redirecting to dashboard in a few seconds...\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"container main-content\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'30px'},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"New International Payment\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Fill in the details below to initiate an international payment\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error}),/*#__PURE__*/_jsxs(\"form\",{className:\"payment-form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"amount\",children:\"Amount *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"amount\",name:\"amount\",value:paymentData.amount,onChange:handleInputChange,placeholder:\"Enter amount (e.g., 1000.50)\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"currency\",children:\"Currency *\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"currency\",name:\"currency\",value:paymentData.currency,onChange:handleInputChange,required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"USD\",children:\"USD - US Dollar\"}),/*#__PURE__*/_jsx(\"option\",{value:\"EUR\",children:\"EUR - Euro\"}),/*#__PURE__*/_jsx(\"option\",{value:\"GBP\",children:\"GBP - British Pound\"}),/*#__PURE__*/_jsx(\"option\",{value:\"JPY\",children:\"JPY - Japanese Yen\"}),/*#__PURE__*/_jsx(\"option\",{value:\"CAD\",children:\"CAD - Canadian Dollar\"}),/*#__PURE__*/_jsx(\"option\",{value:\"AUD\",children:\"AUD - Australian Dollar\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"paymentProvider\",children:\"Payment Provider *\"}),/*#__PURE__*/_jsx(\"select\",{id:\"paymentProvider\",name:\"paymentProvider\",value:paymentData.paymentProvider,onChange:handleInputChange,required:true,children:/*#__PURE__*/_jsx(\"option\",{value:\"SWIFT\",children:\"SWIFT\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"beneficiaryName\",children:\"Beneficiary Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"beneficiaryName\",name:\"beneficiaryName\",value:paymentData.beneficiaryName,onChange:handleInputChange,placeholder:\"Enter beneficiary's full name\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"beneficiaryAccountNumber\",children:\"Beneficiary Account Number *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"beneficiaryAccountNumber\",name:\"beneficiaryAccountNumber\",value:paymentData.beneficiaryAccountNumber,onChange:handleInputChange,placeholder:\"Enter beneficiary's account number\",required:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"beneficiarySwiftCode\",children:\"SWIFT/BIC Code *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"beneficiarySwiftCode\",name:\"beneficiarySwiftCode\",value:paymentData.beneficiarySwiftCode,onChange:handleInputChange,placeholder:\"Enter SWIFT/BIC code (e.g., ABCDUS33XXX)\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'30px',display:'flex',gap:'15px'},children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn\",disabled:loading,children:loading?'Creating Payment...':'Create Payment'}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",onClick:resetForm,disabled:loading,children:\"Reset Form\"})]})]})]});};export default NewPaymentPage;","map":{"version":3,"names":["React","useEffect","useNavigate","usePayment","jsx","_jsx","jsxs","_jsxs","NewPaymentPage","navigate","paymentData","loading","error","success","createdPayment","updateField","resetForm","submitPayment","clearError","clearSuccess","timer","setTimeout","clearTimeout","handleInputChange","e","name","value","target","handleSubmit","preventDefault","result","className","children","style","textAlign","padding","id","marginBottom","onSubmit","htmlFor","type","amount","onChange","placeholder","required","currency","paymentProvider","beneficiaryName","beneficiaryAccountNumber","beneficiarySwiftCode","marginTop","display","gap","disabled","onClick"],"sources":["C:/Users/pc/Desktop/INSY7314/INSY7314/frontend/src/pages/NewPaymentPage.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { usePayment } from '../contexts/PaymentContext';\n\nconst NewPaymentPage = () => {\n  const navigate = useNavigate();\n  const {\n    paymentData,\n    loading,\n    error,\n    success,\n    createdPayment,\n    updateField,\n    resetForm,\n    submitPayment,\n    clearError,\n    clearSuccess\n  } = usePayment();\n\n  useEffect(() => {\n    // Reset form when component mounts\n    resetForm();\n  }, [resetForm]);\n\n  useEffect(() => {\n    // Redirect to dashboard after successful payment\n    if (success && createdPayment) {\n      const timer = setTimeout(() => {\n        navigate('/dashboard');\n      }, 3000);\n      return () => clearTimeout(timer);\n    }\n  }, [success, createdPayment, navigate]);\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    updateField(name, value);\n    // Clear errors when user starts typing\n    if (error) {\n      clearError();\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    clearError();\n\n    const result = await submitPayment();\n\n    if (result.success) {\n      clearSuccess(); // This will be set by the context\n    }\n  };\n\n  if (success && createdPayment) {\n    return (\n      <div className=\"container main-content\">\n        <div className=\"success\" style={{ textAlign: 'center', padding: '50px' }}>\n          <h2>Payment Created Successfully!</h2>\n          <p>Your payment has been submitted and is pending verification.</p>\n          <p>Payment ID: {createdPayment.id}</p>\n          <p>Redirecting to dashboard in a few seconds...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container main-content\">\n      <div style={{ marginBottom: '30px' }}>\n        <h1>New International Payment</h1>\n        <p>Fill in the details below to initiate an international payment</p>\n      </div>\n\n      {error && (\n        <div className=\"error\">\n          {error}\n        </div>\n      )}\n\n      <form className=\"payment-form\" onSubmit={handleSubmit}>\n        <div className=\"form-row\">\n          <div className=\"form-group\">\n            <label htmlFor=\"amount\">Amount *</label>\n            <input\n              type=\"text\"\n              id=\"amount\"\n              name=\"amount\"\n              value={paymentData.amount}\n              onChange={handleInputChange}\n              placeholder=\"Enter amount (e.g., 1000.50)\"\n              required\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <label htmlFor=\"currency\">Currency *</label>\n            <select\n              id=\"currency\"\n              name=\"currency\"\n              value={paymentData.currency}\n              onChange={handleInputChange}\n              required\n            >\n              <option value=\"USD\">USD - US Dollar</option>\n              <option value=\"EUR\">EUR - Euro</option>\n              <option value=\"GBP\">GBP - British Pound</option>\n              <option value=\"JPY\">JPY - Japanese Yen</option>\n              <option value=\"CAD\">CAD - Canadian Dollar</option>\n              <option value=\"AUD\">AUD - Australian Dollar</option>\n            </select>\n          </div>\n        </div>\n\n        <div className=\"form-group\">\n          <label htmlFor=\"paymentProvider\">Payment Provider *</label>\n          <select\n            id=\"paymentProvider\"\n            name=\"paymentProvider\"\n            value={paymentData.paymentProvider}\n            onChange={handleInputChange}\n            required\n          >\n            <option value=\"SWIFT\">SWIFT</option>\n          </select>\n        </div>\n\n        <div className=\"form-row\">\n          <div className=\"form-group\">\n            <label htmlFor=\"beneficiaryName\">Beneficiary Name *</label>\n            <input\n              type=\"text\"\n              id=\"beneficiaryName\"\n              name=\"beneficiaryName\"\n              value={paymentData.beneficiaryName}\n              onChange={handleInputChange}\n              placeholder=\"Enter beneficiary's full name\"\n              required\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <label htmlFor=\"beneficiaryAccountNumber\">Beneficiary Account Number *</label>\n            <input\n              type=\"text\"\n              id=\"beneficiaryAccountNumber\"\n              name=\"beneficiaryAccountNumber\"\n              value={paymentData.beneficiaryAccountNumber}\n              onChange={handleInputChange}\n              placeholder=\"Enter beneficiary's account number\"\n              required\n            />\n          </div>\n        </div>\n\n        <div className=\"form-group\">\n          <label htmlFor=\"beneficiarySwiftCode\">SWIFT/BIC Code *</label>\n          <input\n            type=\"text\"\n            id=\"beneficiarySwiftCode\"\n            name=\"beneficiarySwiftCode\"\n            value={paymentData.beneficiarySwiftCode}\n            onChange={handleInputChange}\n            placeholder=\"Enter SWIFT/BIC code (e.g., ABCDUS33XXX)\"\n            required\n          />\n        </div>\n\n        <div style={{ marginTop: '30px', display: 'flex', gap: '15px' }}>\n          <button\n            type=\"submit\"\n            className=\"btn\"\n            disabled={loading}\n          >\n            {loading ? 'Creating Payment...' : 'Create Payment'}\n          </button>\n\n          <button\n            type=\"button\"\n            className=\"btn btn-secondary\"\n            onClick={resetForm}\n            disabled={loading}\n          >\n            Reset Form\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default NewPaymentPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}