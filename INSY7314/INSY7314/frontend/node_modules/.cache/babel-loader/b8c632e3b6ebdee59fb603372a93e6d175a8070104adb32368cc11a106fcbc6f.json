{"ast":null,"code":"import _objectSpread from\"C:/Users/pc/Desktop/INSY7314/INSY7314/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{createContext,useContext,useReducer}from'react';import axios from'axios';import{useAuth}from'./AuthContext';import{jsx as _jsx}from\"react/jsx-runtime\";const PaymentContext=/*#__PURE__*/createContext();// Payment reducer\nconst paymentReducer=(state,action)=>{switch(action.type){case'UPDATE_FIELD':return _objectSpread(_objectSpread({},state),{},{paymentData:_objectSpread(_objectSpread({},state.paymentData),{},{[action.field]:action.value})});case'RESET_FORM':return _objectSpread(_objectSpread({},state),{},{paymentData:{amount:'',currency:'USD',paymentProvider:'SWIFT',beneficiaryAccountNumber:'',beneficiarySwiftCode:'',beneficiaryName:''},loading:false,error:null,success:false});case'SUBMIT_START':return _objectSpread(_objectSpread({},state),{},{loading:true,error:null,success:false});case'SUBMIT_SUCCESS':return _objectSpread(_objectSpread({},state),{},{loading:false,error:null,success:true,createdPayment:action.payload});case'SUBMIT_FAILURE':return _objectSpread(_objectSpread({},state),{},{loading:false,error:action.payload,success:false});case'CLEAR_ERROR':return _objectSpread(_objectSpread({},state),{},{error:null});case'CLEAR_SUCCESS':return _objectSpread(_objectSpread({},state),{},{success:false,createdPayment:null});default:return state;}};const initialState={paymentData:{amount:'',currency:'USD',paymentProvider:'SWIFT',beneficiaryAccountNumber:'',beneficiarySwiftCode:'',beneficiaryName:''},loading:false,error:null,success:false,createdPayment:null};export const PaymentProvider=_ref=>{let{children}=_ref;const[state,dispatch]=useReducer(paymentReducer,initialState);const{token}=useAuth();const updateField=(field,value)=>{dispatch({type:'UPDATE_FIELD',field,value});};const resetForm=()=>{dispatch({type:'RESET_FORM'});};const submitPayment=async()=>{dispatch({type:'SUBMIT_START'});try{const response=await axios.post('/payments',state.paymentData,{headers:{Authorization:\"Bearer \".concat(token)}});dispatch({type:'SUBMIT_SUCCESS',payload:response.data});return{success:true,payment:response.data};}catch(error){let errorMessage='Payment submission failed';if(error.response&&error.response.data&&error.response.data.error){errorMessage=error.response.data.error;}else if(error.message){errorMessage=error.message;}dispatch({type:'SUBMIT_FAILURE',payload:errorMessage});return{success:false,error:errorMessage};}};const clearError=()=>{dispatch({type:'CLEAR_ERROR'});};const clearSuccess=()=>{dispatch({type:'CLEAR_SUCCESS'});};const value=_objectSpread(_objectSpread({},state),{},{updateField,resetForm,submitPayment,clearError,clearSuccess});return/*#__PURE__*/_jsx(PaymentContext.Provider,{value:value,children:children});};export const usePayment=()=>{const context=useContext(PaymentContext);if(!context){throw new Error('usePayment must be used within a PaymentProvider');}return context;};","map":{"version":3,"names":["React","createContext","useContext","useReducer","axios","useAuth","jsx","_jsx","PaymentContext","paymentReducer","state","action","type","_objectSpread","paymentData","field","value","amount","currency","paymentProvider","beneficiaryAccountNumber","beneficiarySwiftCode","beneficiaryName","loading","error","success","createdPayment","payload","initialState","PaymentProvider","_ref","children","dispatch","token","updateField","resetForm","submitPayment","response","post","headers","Authorization","concat","data","payment","errorMessage","message","clearError","clearSuccess","Provider","usePayment","context","Error"],"sources":["C:/Users/pc/Desktop/INSY7314/INSY7314/frontend/src/contexts/PaymentContext.js"],"sourcesContent":["import React, { createContext, useContext, useReducer } from 'react';\nimport axios from 'axios';\nimport { useAuth } from './AuthContext';\n\nconst PaymentContext = createContext();\n\n// Payment reducer\nconst paymentReducer = (state, action) => {\n  switch (action.type) {\n    case 'UPDATE_FIELD':\n      return {\n        ...state,\n        paymentData: {\n          ...state.paymentData,\n          [action.field]: action.value\n        }\n      };\n    case 'RESET_FORM':\n      return {\n        ...state,\n        paymentData: {\n          amount: '',\n          currency: 'USD',\n          paymentProvider: 'SWIFT',\n          beneficiaryAccountNumber: '',\n          beneficiarySwiftCode: '',\n          beneficiaryName: ''\n        },\n        loading: false,\n        error: null,\n        success: false\n      };\n    case 'SUBMIT_START':\n      return {\n        ...state,\n        loading: true,\n        error: null,\n        success: false\n      };\n    case 'SUBMIT_SUCCESS':\n      return {\n        ...state,\n        loading: false,\n        error: null,\n        success: true,\n        createdPayment: action.payload\n      };\n    case 'SUBMIT_FAILURE':\n      return {\n        ...state,\n        loading: false,\n        error: action.payload,\n        success: false\n      };\n    case 'CLEAR_ERROR':\n      return {\n        ...state,\n        error: null\n      };\n    case 'CLEAR_SUCCESS':\n      return {\n        ...state,\n        success: false,\n        createdPayment: null\n      };\n    default:\n      return state;\n  }\n};\n\nconst initialState = {\n  paymentData: {\n    amount: '',\n    currency: 'USD',\n    paymentProvider: 'SWIFT',\n    beneficiaryAccountNumber: '',\n    beneficiarySwiftCode: '',\n    beneficiaryName: ''\n  },\n  loading: false,\n  error: null,\n  success: false,\n  createdPayment: null\n};\n\nexport const PaymentProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(paymentReducer, initialState);\n  const { token } = useAuth();\n\n  const updateField = (field, value) => {\n    dispatch({ type: 'UPDATE_FIELD', field, value });\n  };\n\n  const resetForm = () => {\n    dispatch({ type: 'RESET_FORM' });\n  };\n\n  const submitPayment = async () => {\n    dispatch({ type: 'SUBMIT_START' });\n\n    try {\n      const response = await axios.post('/payments', state.paymentData, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n\n      dispatch({\n        type: 'SUBMIT_SUCCESS',\n        payload: response.data\n      });\n\n      return { success: true, payment: response.data };\n    } catch (error) {\n      let errorMessage = 'Payment submission failed';\n\n      if (error.response && error.response.data && error.response.data.error) {\n        errorMessage = error.response.data.error;\n      } else if (error.message) {\n        errorMessage = error.message;\n      }\n\n      dispatch({\n        type: 'SUBMIT_FAILURE',\n        payload: errorMessage\n      });\n\n      return { success: false, error: errorMessage };\n    }\n  };\n\n  const clearError = () => {\n    dispatch({ type: 'CLEAR_ERROR' });\n  };\n\n  const clearSuccess = () => {\n    dispatch({ type: 'CLEAR_SUCCESS' });\n  };\n\n  const value = {\n    ...state,\n    updateField,\n    resetForm,\n    submitPayment,\n    clearError,\n    clearSuccess\n  };\n\n  return (\n    <PaymentContext.Provider value={value}>\n      {children}\n    </PaymentContext.Provider>\n  );\n};\n\nexport const usePayment = () => {\n  const context = useContext(PaymentContext);\n  if (!context) {\n    throw new Error('usePayment must be used within a PaymentProvider');\n  }\n  return context;\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}