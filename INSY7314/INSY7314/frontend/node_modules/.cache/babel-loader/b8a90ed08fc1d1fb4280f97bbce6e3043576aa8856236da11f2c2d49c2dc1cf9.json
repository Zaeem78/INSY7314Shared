{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pc\\\\Desktop\\\\INSY7314Shared\\\\INSY7314\\\\INSY7314\\\\frontend\\\\src\\\\contexts\\\\PaymentContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useReducer } from 'react';\nimport axios from 'axios';\nimport { useAuth } from './AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PaymentContext = /*#__PURE__*/createContext();\n\n// Payment reducer\nconst paymentReducer = (state, action) => {\n  switch (action.type) {\n    case 'UPDATE_FIELD':\n      return {\n        ...state,\n        paymentData: {\n          ...state.paymentData,\n          [action.field]: action.value\n        }\n      };\n    case 'RESET_FORM':\n      return {\n        ...state,\n        paymentData: {\n          amount: '',\n          currency: 'USD',\n          paymentProvider: 'SWIFT',\n          beneficiaryAccountNumber: '',\n          beneficiarySwiftCode: '',\n          beneficiaryName: ''\n        },\n        loading: false,\n        error: null,\n        success: false\n      };\n    case 'SUBMIT_START':\n      return {\n        ...state,\n        loading: true,\n        error: null,\n        success: false\n      };\n    case 'SUBMIT_SUCCESS':\n      return {\n        ...state,\n        loading: false,\n        error: null,\n        success: true,\n        createdPayment: action.payload\n      };\n    case 'SUBMIT_FAILURE':\n      return {\n        ...state,\n        loading: false,\n        error: action.payload,\n        success: false\n      };\n    case 'CLEAR_ERROR':\n      return {\n        ...state,\n        error: null\n      };\n    case 'CLEAR_SUCCESS':\n      return {\n        ...state,\n        success: false,\n        createdPayment: null\n      };\n    default:\n      return state;\n  }\n};\nconst initialState = {\n  paymentData: {\n    amount: '',\n    currency: 'USD',\n    paymentProvider: 'SWIFT',\n    beneficiaryAccountNumber: '',\n    beneficiarySwiftCode: '',\n    beneficiaryName: ''\n  },\n  loading: false,\n  error: null,\n  success: false,\n  createdPayment: null\n};\nexport const PaymentProvider = ({\n  children\n}) => {\n  _s();\n  const [state, dispatch] = useReducer(paymentReducer, initialState);\n  const {\n    token\n  } = useAuth();\n  const updateField = (field, value) => {\n    dispatch({\n      type: 'UPDATE_FIELD',\n      field,\n      value\n    });\n  };\n  const resetForm = () => {\n    dispatch({\n      type: 'RESET_FORM'\n    });\n  };\n  const submitPayment = async () => {\n    dispatch({\n      type: 'SUBMIT_START'\n    });\n    try {\n      const response = await axios.post('/payments', state.paymentData, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      dispatch({\n        type: 'SUBMIT_SUCCESS',\n        payload: response.data\n      });\n      return {\n        success: true,\n        payment: response.data\n      };\n    } catch (error) {\n      let errorMessage = 'Payment submission failed';\n      if (error.response && error.response.data && error.response.data.error) {\n        errorMessage = error.response.data.error;\n      } else if (error.message) {\n        errorMessage = error.message;\n      }\n      dispatch({\n        type: 'SUBMIT_FAILURE',\n        payload: errorMessage\n      });\n      return {\n        success: false,\n        error: errorMessage\n      };\n    }\n  };\n  const clearError = () => {\n    dispatch({\n      type: 'CLEAR_ERROR'\n    });\n  };\n  const clearSuccess = () => {\n    dispatch({\n      type: 'CLEAR_SUCCESS'\n    });\n  };\n  const value = {\n    ...state,\n    updateField,\n    resetForm,\n    submitPayment,\n    clearError,\n    clearSuccess\n  };\n  return /*#__PURE__*/_jsxDEV(PaymentContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 150,\n    columnNumber: 5\n  }, this);\n};\n_s(PaymentProvider, \"9pzeTUyXlBBkbRmZybfufaiJsfI=\", false, function () {\n  return [useAuth];\n});\n_c = PaymentProvider;\nexport const usePayment = () => {\n  _s2();\n  const context = useContext(PaymentContext);\n  if (!context) {\n    throw new Error('usePayment must be used within a PaymentProvider');\n  }\n  return context;\n};\n_s2(usePayment, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nvar _c;\n$RefreshReg$(_c, \"PaymentProvider\");","map":{"version":3,"names":["React","createContext","useContext","useReducer","axios","useAuth","jsxDEV","_jsxDEV","PaymentContext","paymentReducer","state","action","type","paymentData","field","value","amount","currency","paymentProvider","beneficiaryAccountNumber","beneficiarySwiftCode","beneficiaryName","loading","error","success","createdPayment","payload","initialState","PaymentProvider","children","_s","dispatch","token","updateField","resetForm","submitPayment","response","post","headers","Authorization","data","payment","errorMessage","message","clearError","clearSuccess","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","usePayment","_s2","context","Error","$RefreshReg$"],"sources":["C:/Users/pc/Desktop/INSY7314Shared/INSY7314/INSY7314/frontend/src/contexts/PaymentContext.js"],"sourcesContent":["import React, { createContext, useContext, useReducer } from 'react';\nimport axios from 'axios';\nimport { useAuth } from './AuthContext';\n\nconst PaymentContext = createContext();\n\n// Payment reducer\nconst paymentReducer = (state, action) => {\n  switch (action.type) {\n    case 'UPDATE_FIELD':\n      return {\n        ...state,\n        paymentData: {\n          ...state.paymentData,\n          [action.field]: action.value\n        }\n      };\n    case 'RESET_FORM':\n      return {\n        ...state,\n        paymentData: {\n          amount: '',\n          currency: 'USD',\n          paymentProvider: 'SWIFT',\n          beneficiaryAccountNumber: '',\n          beneficiarySwiftCode: '',\n          beneficiaryName: ''\n        },\n        loading: false,\n        error: null,\n        success: false\n      };\n    case 'SUBMIT_START':\n      return {\n        ...state,\n        loading: true,\n        error: null,\n        success: false\n      };\n    case 'SUBMIT_SUCCESS':\n      return {\n        ...state,\n        loading: false,\n        error: null,\n        success: true,\n        createdPayment: action.payload\n      };\n    case 'SUBMIT_FAILURE':\n      return {\n        ...state,\n        loading: false,\n        error: action.payload,\n        success: false\n      };\n    case 'CLEAR_ERROR':\n      return {\n        ...state,\n        error: null\n      };\n    case 'CLEAR_SUCCESS':\n      return {\n        ...state,\n        success: false,\n        createdPayment: null\n      };\n    default:\n      return state;\n  }\n};\n\nconst initialState = {\n  paymentData: {\n    amount: '',\n    currency: 'USD',\n    paymentProvider: 'SWIFT',\n    beneficiaryAccountNumber: '',\n    beneficiarySwiftCode: '',\n    beneficiaryName: ''\n  },\n  loading: false,\n  error: null,\n  success: false,\n  createdPayment: null\n};\n\nexport const PaymentProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(paymentReducer, initialState);\n  const { token } = useAuth();\n\n  const updateField = (field, value) => {\n    dispatch({ type: 'UPDATE_FIELD', field, value });\n  };\n\n  const resetForm = () => {\n    dispatch({ type: 'RESET_FORM' });\n  };\n\n  const submitPayment = async () => {\n    dispatch({ type: 'SUBMIT_START' });\n\n    try {\n      const response = await axios.post('/payments', state.paymentData, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n\n      dispatch({\n        type: 'SUBMIT_SUCCESS',\n        payload: response.data\n      });\n\n      return { success: true, payment: response.data };\n    } catch (error) {\n      let errorMessage = 'Payment submission failed';\n\n      if (error.response && error.response.data && error.response.data.error) {\n        errorMessage = error.response.data.error;\n      } else if (error.message) {\n        errorMessage = error.message;\n      }\n\n      dispatch({\n        type: 'SUBMIT_FAILURE',\n        payload: errorMessage\n      });\n\n      return { success: false, error: errorMessage };\n    }\n  };\n\n  const clearError = () => {\n    dispatch({ type: 'CLEAR_ERROR' });\n  };\n\n  const clearSuccess = () => {\n    dispatch({ type: 'CLEAR_SUCCESS' });\n  };\n\n  const value = {\n    ...state,\n    updateField,\n    resetForm,\n    submitPayment,\n    clearError,\n    clearSuccess\n  };\n\n  return (\n    <PaymentContext.Provider value={value}>\n      {children}\n    </PaymentContext.Provider>\n  );\n};\n\nexport const usePayment = () => {\n  const context = useContext(PaymentContext);\n  if (!context) {\n    throw new Error('usePayment must be used within a PaymentProvider');\n  }\n  return context;\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}